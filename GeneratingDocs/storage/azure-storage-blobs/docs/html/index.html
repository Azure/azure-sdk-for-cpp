<!-- HTML header for doxygen 1.9.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>azure-storage-blobs: Azure Storage Blobs Client Library for C++</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-62780441-44"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-62780441-44');
</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
<script>
WINDOW_CONTENTS = window.location.href.split("/");
// language specific
SELECTED_LANGUAGE = "cpp";
populateOptions("#versionSelector", [
  "#versionSelector",
  "#versionSelectorHeader"
]);
function currentVersion() {
  // Filled in by Doxygen template
  return "12.11.0-beta.1";
}
function currentPackage() {
  // Filled in by Doxygen template
  return "azure-storage-blobs";
}
function httpGetAsync(targetUrl, callback) {
  var xmlHttp = new XMLHttpRequest();
  xmlHttp.onreadystatechange = function() {
    if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
      callback(xmlHttp.responseText);
  };
  xmlHttp.open("GET", targetUrl, true); // true for asynchronous
  xmlHttp.send(null);
}
function showSelectors(selectors) {
  selectors.forEach(function(item, index) {
    $(item).show();
  });
}
function hideSelectors(selectors) {
  selectors.forEach(function(item, index) {
    $(item).hide();
  });
}
function populateOptions(optionSelector, otherSelectors) {
  if (currentPackage()) {
    var versionRequestUrl =
      "https://azuresdkdocs.blob.core.windows.net/$web/" +
      SELECTED_LANGUAGE +
      "/" +
      currentPackage() +
      "/versioning/versions";
    httpGetAsync(versionRequestUrl, function(responseText) {
      if (responseText) {
        let options = responseText.match(/[^\r\n]+/g);
        populateVersionDropDown(optionSelector, options);
        showSelectors(otherSelectors);
        $(optionSelector).change(function() {
          targetVersion = $(this).val();
          window.location.href = getPackageUrl(SELECTED_LANGUAGE, currentPackage(), targetVersion);
        });
      }
    });
  }
}
function populateVersionDropDown(selector, values) {
  var select = $(selector);
  $("option", select).remove();
  $.each(values, function(index, text) {
    $("<option/>", { value: text, text: text }).appendTo(select);
  });
  select.val(currentVersion());
}
function getPackageUrl(language, package, version) {
  return (
    "https://azuresdkdocs.blob.core.windows.net/$web/" +
    language +
    "/" +
    package +
    "/" +
    version +
    "/index.html"
  );
}
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo">
    <img alt="Logo" src="logo.svg"/>
  </td>
  <td id="projectalign">
   <div id="projectname">
    <div class="navbrand">
    </div>
    azure-storage-blobs
    <span id="projectnumber">
      <span id="versionSelectorHeader">
        <span>
            <select id="versionSelector">
                <option>12.11.0-beta.1</option>
            </select>
        </span>
      </span>
    </span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Azure Storage Blobs Client Library for C++ </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__r_e_a_d_m_e"></a> Azure Blob storage is Microsoft's object storage solution for the cloud. Blob storage is optimized for storing massive amounts of unstructured data. Unstructured data is data that does not adhere to a particular data model or definition, such as text or binary data.</p>
<h1><a class="anchor" id="getting-started"></a>
Getting started</h1>
<h2><a class="anchor" id="install-the-package"></a>
Install the package</h2>
<p>The easiest way to acquire the C++ SDK is leveraging vcpkg package manager. See the corresponding <a href="https://github.com/Azure/azure-sdk-for-cpp#download--install-the-sdk">Azure SDK for C++ readme section</a>.</p>
<p>To install Azure Storage packages via vcpkg:</p>
<div class="fragment"><div class="line">vcpkg install azure-storage-blobs-cpp</div>
</div><!-- fragment --><p>Then, use in your CMake file:</p>
<div class="fragment"><div class="line">find_package(azure-storage-blobs-cpp CONFIG REQUIRED)</div>
<div class="line">target_link_libraries(&lt;your project name&gt; PRIVATE Azure::azure-storage-blobs)</div>
</div><!-- fragment --><h2><a class="anchor" id="prerequisites"></a>
Prerequisites</h2>
<p>You need an Azure subscription and a <a href="https://learn.microsoft.com/azure/storage/common/storage-account-overview">Storage Account</a> to use this package.</p>
<p>To create a new Storage Account, you can use the <a href="https://learn.microsoft.com/azure/storage/common/storage-account-create?tabs=azure-portal">Azure Portal</a>, <a href="https://learn.microsoft.com/azure/storage/common/storage-account-create?tabs=azure-powershell">Azure PowerShell</a>, or the <a href="https://learn.microsoft.com/azure/storage/common/storage-account-create?tabs=azure-cli">Azure CLI</a>.</p>
<h2><a class="anchor" id="build-from-source"></a>
Build from Source</h2>
<p>First, download the repository to your local folder:</p>
<div class="fragment"><div class="line">git clone https://github.com/Azure/azure-sdk-for-cpp.git</div>
</div><!-- fragment --><p>Create a new folder under the root directory of local cloned repo, switch into this folder and run below commands:</p>
<p>Windows:</p>
<div class="fragment"><div class="line">cmake .. -A x64</div>
<div class="line">cmake --build . --target azure-storage-blobs</div>
</div><!-- fragment --><p>or Unix:</p>
<div class="fragment"><div class="line">cmake .. -DCMAKE_BUILD_TYPE=Debug</div>
<div class="line">cmake --build . --target azure-storage-blobs</div>
</div><!-- fragment --><h1><a class="anchor" id="key-concepts"></a>
Key concepts</h1>
<p>Blob storage is designed for:</p>
<ul>
<li>Serving images or documents directly to a browser.</li>
<li>Storing files for distributed access.</li>
<li>Streaming video and audio.</li>
<li>Writing to log files.</li>
<li>Storing data for backup and restore, disaster recovery, and archiving.</li>
<li>Storing data for analysis by an on-premises or Azure-hosted service.</li>
</ul>
<p>Blob storage offers three types of resources:</p>
<ul>
<li>The storage account used via <code>BlobServiceClient</code></li>
<li>A container in the storage account used via <code>BlobContainerClient</code></li>
<li>A blob in a container used via <code>BlobClient</code></li>
</ul>
<p>Learn more about options for authentication (including Connection Strings, Shared Key, Shared Key Signatures, Active Directory, and anonymous public access) in our <a href="https://github.com/Azure/azure-sdk-for-cpp/tree/main/sdk/storage/azure-storage-blobs/samples">samples</a>.</p>
<h2><a class="anchor" id="thread-safety"></a>
Thread safety</h2>
<p>We guarantee that all client instance methods are thread-safe and independent of each other (<a href="https://azure.github.io/azure-sdk/cpp_introduction.html#thread-safety">guideline</a>). This ensures that the recommendation of reusing client instances is always safe, even across threads.</p>
<h2><a class="anchor" id="additional-concepts"></a>
Additional concepts</h2>
<p>Client Options | <a href="https://github.com/Azure/azure-sdk-for-cpp#response-t-model-types">Accessing the response</a> | <a href="https://github.com/Azure/azure-sdk-for-cpp#long-running-operations">Long-running operations</a> | Handling failures</p>
<h1><a class="anchor" id="examples"></a>
Examples</h1>
<h2><a class="anchor" id="uploading-a-blob"></a>
Uploading a blob</h2>
<div class="fragment"><div class="line"><span class="keyword">const</span> std::string connectionString = <span class="stringliteral">&quot;&lt;connection_string&gt;&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> std::string containerName = <span class="stringliteral">&quot;sample-container&quot;</span>;</div>
<div class="line"><span class="keyword">const</span> std::string blobName = <span class="stringliteral">&quot;sample-blob&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> containerClient = BlobContainerClient::CreateFromConnectionString(connectionString, containerName);</div>
<div class="line">containerClient.CreateIfNotExists();</div>
<div class="line"> </div>
<div class="line">BlockBlobClient blobClient = containerClient.GetBlockBlobClient(blobName);</div>
<div class="line"><span class="comment">// upload from local file</span></div>
<div class="line">blobClient.UploadFrom(localFilePath);</div>
<div class="line"><span class="comment">// or upload from memory buffer</span></div>
<div class="line">blobClinet.UploadFrom(bufferPtr, bufferLength);</div>
</div><!-- fragment --><h2><a class="anchor" id="downloading-a-blob"></a>
Downloading a blob</h2>
<div class="fragment"><div class="line"><span class="comment">// download to local file</span></div>
<div class="line">blobClient.DownloadTo(localFilePath);</div>
<div class="line"><span class="comment">// or download to memory buffer</span></div>
<div class="line">blobClinet.DownloadTo(bufferPtr, bufferLength);</div>
</div><!-- fragment --><h2><a class="anchor" id="enumerating-blobs"></a>
Enumerating blobs</h2>
<div class="fragment"><div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> blobPage = containerClient.ListBlobs(); blobPage.HasPage(); blobPage.MoveToNextPage()) {</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; blob : blobPage.Blobs) {</div>
<div class="line">    <span class="comment">// Below is what you want to do with each blob</span></div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;blob: &quot;</span> &lt;&lt; blob.Name &lt;&lt; std::endl;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="troubleshooting"></a>
Troubleshooting</h1>
<p>All Blob service operations will throw a <a href="https://github.com/Azure/azure-sdk-for-cpp/blob/main/sdk/storage/azure-storage-common/inc/azure/storage/common/storage_exception.hpp">StorageException</a> on failure with helpful <a href="https://learn.microsoft.com/rest/api/storageservices/blob-service-error-codes">ErrorCode</a>s. Many of these errors are recoverable.</p>
<div class="fragment"><div class="line"><span class="keywordflow">try</span></div>
<div class="line">{</div>
<div class="line">  containerClient.Delete();</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">catch</span> (Azure::Storage::StorageException&amp; e)</div>
<div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span> (e.ErrorCode == <span class="stringliteral">&quot;ContainerNotFound&quot;</span>)</div>
<div class="line">  {</div>
<div class="line">    <span class="comment">// ignore the error if the container does not exist.</span></div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">  {</div>
<div class="line">    <span class="comment">// handle other errors here</span></div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="next-steps"></a>
Next steps</h1>
<p>Get started with our <a href="https://github.com/Azure/azure-sdk-for-cpp/tree/main/sdk/storage/azure-storage-blobs/samples">Blob samples</a>:</p>
<ol type="1">
<li><a href="https://github.com/Azure/azure-sdk-for-cpp/blob/main/sdk/storage/azure-storage-blobs/samples/blob_getting_started.cpp">Upload and download blobs</a></li>
<li><a href="https://github.com/Azure/azure-sdk-for-cpp/blob/main/sdk/storage/azure-storage-blobs/samples/blob_list_operation.cpp">List operations</a></li>
</ol>
<h1><a class="anchor" id="contributing"></a>
Contributing</h1>
<p>See the <a href="https://github.com/Azure/azure-sdk-for-cpp/blob/main/CONTRIBUTING.md">Storage CONTRIBUTING.md</a> for details on building, testing, and contributing to these libraries.</p>
<p>This project welcomes contributions and suggestions. Most contributions require you to agree to a Contributor License Agreement (CLA) declaring that you have the right to, and actually do, grant us the rights to use your contribution. For details, visit <a href="https://cla.microsoft.com">cla.microsoft.com</a>.</p>
<p>This project has adopted the <a href="https://opensource.microsoft.com/codeofconduct/">Microsoft Open Source Code of Conduct</a>. For more information see the <a href="https://opensource.microsoft.com/codeofconduct/faq/">Code of Conduct FAQ</a> or contact <a href="#" onclick="location.href='mai'+'lto:'+'ope'+'nc'+'ode'+'@m'+'icr'+'os'+'oft'+'.c'+'om'; return false;">opencode@microsoft.com</a> with any additional questions or comments. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"/>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.9.7-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
