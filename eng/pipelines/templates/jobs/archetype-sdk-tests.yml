parameters:
- name: Location
  type: string
  default: ''
- name: SubscriptionConfiguration
  type: string
  default: $(sub-config-azure-cloud-test-resources)
- name: ServiceDirectory
  type: string
  default: not-specified
- name: CtestRegex
  type: string
  default: .*
- name: Coverage
  type: string
  default: 'enabled'
- name: CoverageReportPath
  type: string
  default: sdk/*/*/*cov_xml.xml
- name: TimeoutInMinutes
  type: number
  default: 60

jobs:
- template: /eng/common/pipelines/templates/jobs/archetype-sdk-tests-generate.yml
  parameters:
    MatrixConfigs:
      - Name: base
        Path: eng/pipelines/templates/stages/platform-matrix-live.json
        Selection: all
        GenerateVMJobs: true
    JobTemplatePath: /eng/pipelines/templates/jobs/live.tests.yml
    AdditionalParameters:
      Location: ${{ parameters.Location}}
      SubscriptionConfiguration: ${{ parameters.SubscriptionConfiguration}}
      ServiceDirectory: ${{ parameters.ServiceDirectory}}
      CtestRegex: ${{ parameters.CtestRegex}}
      Coverage: ${{ parameters.Coverage}}
      CoverageReportPath: ${{ parameters.CoverageReportPath}}
      TimeoutInMinutes: ${{ parameters.TimeoutInMinutes}}
